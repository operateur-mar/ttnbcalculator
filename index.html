<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TTNB Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4f46e5',
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-100 p-6">

<div id="app" class="w-full bg-white shadow-lg rounded-lg p-6">
  <h1 class="text-2xl font-bold text-primary mb-6">CALCULE TTNB </h1>

  <!-- Inputs -->
  <div class="flex flex-col md:flex-row md:items-end md:space-x-4 space-y-4 md:space-y-0">
    <div class="flex-1">
      <label class="block text-gray-700 mb-1" for="surface">Superficie (m²):</label>
      <input id="surface" v-model.number="surface" type="number" placeholder="Tapez surface"
             class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-primary" />
    </div>
    <div class="flex-1">
      <label class="block text-gray-700 mb-1" for="year">Année:</label>
      <input id="year" v-model.number="year" type="number" placeholder="Tapez L'année"
             class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-primary" />
    </div>
    <div class="flex-1">
      <label class="block text-gray-700 mb-1" for="zone">Zone:</label>
      <select id="zone" v-model="zone"
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-primary">
        <option value="zone1">Zone 1 (8dh) </option>
        <option value="zone2">Zone 2 (15dh)</option>
        
      </select>
    </div>
    <div class="flex-shrink-0">
      <button @click="calculateTTNB"
              class="w-full bg-primary text-white px-5 py-2 rounded hover:bg-indigo-700 transition">
        Calculer
      </button>
    </div>
  </div>

  <!-- Result -->
  <div v-if="result !== null" class="mt-6 text-lg font-semibold text-gray-800 flex justify-center dark:text-bg-violet-500">
    TOTAL A PAYER: {{ total.sum.toFixed(2) }}
  </div>

  <!-- Table -->
  <div v-if="tableData.length" class="mt-6 overflow-x-auto">
    <table class="min-w-full border border-gray-300 text-sm text-left">
      <thead class="bg-gray-100">
      <tr>
        <th class="px-4 py-2 border">L'année</th>
        <th class="px-4 py-2 border">Montant de base</th>
        <th class="px-4 py-2 border">Défault Declaration</th>
        <th class="px-4 py-2 border">10% Tax</th>
        <th class="px-4 py-2 border">5% Tax</th>
        <th class="px-4 py-2 border">{{ totalMonthsLabel }}</th>
        <th class="px-4 py-2 border">Tax Du N° Mois x 0.50%</th>
        <th class="px-4 py-2 border">TOTAL</th>
      </tr>
      </thead>
      <tbody>
      <tr v-for="(row, index) in tableData" :key="row.year" class="hover:bg-gray-50">
        <td class="px-4 py-2 border font-semibold">{{ row.year }}</td>
        <td class="px-4 py-2 border">{{ row.calculatedPrice.toFixed(2) }}</td>
        <td class="px-4 py-2 border">
          <label class="inline-flex items-center space-x-1">
            <input type="checkbox" v-model="row.includeNonReport" @change="updateTotal()" class="form-checkbox text-primary">
            <span>{{ row.nonReport }}</span>
          </label>
        </td>
        <td class="px-4 py-2 border">{{ row.tax10.toFixed(2) }}</td>
        <td class="px-4 py-2 border">{{ row.tax5.toFixed(2) }}</td>
        <td class="px-4 py-2 border">{{ row.months }}</td>
        <td class="px-4 py-2 border">{{ row.taxMonthly.toFixed(2) }}</td>
        <td class="px-4 py-2 border font-semibold text-blue-700">{{ row.sum.toFixed(2) }}</td>
      </tr>
      </tbody>
      <tfoot class="bg-yellow-100 font-semibold">
      <tr>
        <td class="px-4 py-2 border text-right">Total</td>
        <td class="px-4 py-2 border">{{ total.calculatedPrice.toFixed(2) }}</td>
        <td class="px-4 py-2 border">{{ total.nonReport.toFixed(2) }}</td>
        <td class="px-4 py-2 border">{{ total.tax10.toFixed(2) }}</td>
        <td class="px-4 py-2 border">{{ total.tax5.toFixed(2) }}</td>
        <td class="px-4 py-2 border text-gray-400">—</td>
        <td class="px-4 py-2 border">{{ total.taxMonthly.toFixed(2) }}</td>
        <td class="px-4 py-2 border text-blue-700">{{ total.sum.toFixed(2) }}</td>
      </tr>
      </tfoot>
    </table>
  </div>
</div>

<!-- Vue CDN -->
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

<script>
function _0xc91d(_0x277609,_0x380505){const _0xe33fdb=_0xe33f();return _0xc91d=function(_0xc91d8,_0x430c17){_0xc91d8=_0xc91d8-0x151;let _0x2d6b45=_0xe33fdb[_0xc91d8];return _0x2d6b45;},_0xc91d(_0x277609,_0x380505);}const _0x1a6ba2=_0xc91d;(function(_0x10c4fc,_0x14a5ab){const _0x3a6475=_0xc91d,_0x48912c=_0x10c4fc();while(!![]){try{const _0x10fc17=-parseInt(_0x3a6475(0x151))/0x1+-parseInt(_0x3a6475(0x157))/0x2*(-parseInt(_0x3a6475(0x163))/0x3)+parseInt(_0x3a6475(0x15a))/0x4+-parseInt(_0x3a6475(0x152))/0x5*(parseInt(_0x3a6475(0x162))/0x6)+-parseInt(_0x3a6475(0x16e))/0x7*(parseInt(_0x3a6475(0x16f))/0x8)+parseInt(_0x3a6475(0x16c))/0x9*(-parseInt(_0x3a6475(0x161))/0xa)+parseInt(_0x3a6475(0x16a))/0xb;if(_0x10fc17===_0x14a5ab)break;else _0x48912c['push'](_0x48912c['shift']());}catch(_0x1dcd50){_0x48912c['push'](_0x48912c['shift']());}}}(_0xe33f,0xa3207));function _0xe33f(){const _0x148dfa=['zone','77wkATpK','910376UwTKIA','#app','tableData','getMonth','includeNonReport','mount','730815JDxsRo','8105CZFlnA','tax5','getFullYear','forEach','push','2262282qMfRye','calculatedPrice','nonReport','2983888PuKuaN','result','reverse','tax10','total','sum','zone1','2354410KyQLUl','1524YURuCh','3WnjwSo','taxMonthly','updateTotal','max','Total\x20Des\x20Mois\x20(','Veuillez\x20remplir\x20les\x20champs\x20correctement.','surface','20808623SLsOTb','year','27PgzDFs'];_0xe33f=function(){return _0x148dfa;};return _0xe33f();}const {createApp}=Vue;createApp({'data'(){const _0x48ac65=_0xc91d;return{'surface':null,'year':null,'result':null,'zone':_0x48ac65(0x160),'tableData':[],'total':{'calculatedPrice':0x0,'nonReport':0x0,'tax10':0x0,'tax5':0x0,'taxMonthly':0x0,'sum':0x0}};},'computed':{'totalMonthsLabel'(){const _0x3b7591=_0xc91d,_0x10db69=new Date()[_0x3b7591(0x154)](),_0x3a6c64=new Date()[_0x3b7591(0x172)]()+0x1;let _0x30e9bf=0x0;if(!this[_0x3b7591(0x16b)]||this['year']>_0x10db69)return'';for(let _0x5058a9=this['year'];_0x5058a9<=_0x10db69;_0x5058a9++){_0x30e9bf+=_0x5058a9===_0x10db69?_0x3a6c64:0xc;}return _0x3b7591(0x167)+_0x30e9bf+')';}},'methods':{'calculateTTNB'(){const _0x45e531=_0xc91d,_0x339439=new Date()['getFullYear'](),_0x1d41f4=new Date()[_0x45e531(0x172)]()+0x1,_0x246e1c={'zone1':0x8,'zone2':0xf};let _0xa02d2;this[_0x45e531(0x16b)]<0x7e3?_0xa02d2=0x6:_0xa02d2=_0x246e1c[this[_0x45e531(0x16d)]]||0x6;if(this['surface']&&this[_0x45e531(0x16b)]&&this[_0x45e531(0x16b)]<=_0x339439){this[_0x45e531(0x15b)]=this['surface']*_0xa02d2+(this['year']-0x7d0),this['tableData']=[];const _0x31290b=[];for(let _0x24f194=_0x339439;_0x24f194>=this['year'];_0x24f194--){_0x31290b[_0x45e531(0x156)](_0x24f194);}let _0x24d88b=0x0;const _0x342578=[];_0x31290b[_0x45e531(0x155)](_0x34ce91=>{const _0x3ce5a6=_0x45e531;if(_0x34ce91<0x7d8)return;const _0x18f9b0=_0x34ce91<0x7e3?0x6:_0x246e1c[this[_0x3ce5a6(0x16d)]]||0x6,_0x495d80=this[_0x3ce5a6(0x169)]*_0x18f9b0;let _0x2aaa66;if(_0x34ce91===_0x339439)_0x2aaa66=Math[_0x3ce5a6(0x166)](_0x1d41f4-0x3,0x0);else _0x34ce91===0x7e4?_0x2aaa66=0x9:_0x2aaa66=0xc;_0x24d88b+=_0x2aaa66;const _0x4c5b74=_0x495d80*0.1,_0x1a75e4=_0x495d80*0.05,_0x3189af=_0x495d80*0.15;let _0xb2e430=_0x3189af<0x1f4?0x1f4:_0x3189af;const _0x15a1cb=_0x495d80*_0x24d88b*0.005,_0x57bab3=!![],_0x3f8f56=_0x495d80+(_0x57bab3?_0xb2e430:0x0)+_0x4c5b74+_0x1a75e4+_0x15a1cb;_0x342578[_0x3ce5a6(0x156)]({'year':_0x34ce91,'calculatedPrice':_0x495d80,'tax10':_0x4c5b74,'tax5':_0x1a75e4,'months':_0x24d88b,'taxMonthly':_0x15a1cb,'nonReport':_0xb2e430,'includeNonReport':_0x57bab3,'sum':_0x3f8f56});}),this[_0x45e531(0x171)]=_0x342578[_0x45e531(0x15c)](),this[_0x45e531(0x165)]();}else this[_0x45e531(0x15b)]=null,this[_0x45e531(0x171)]=[],alert(_0x45e531(0x168));},'updateTotal'(){const _0x385c12=_0xc91d;this[_0x385c12(0x15e)]={'calculatedPrice':0x0,'nonReport':0x0,'tax10':0x0,'tax5':0x0,'taxMonthly':0x0,'sum':0x0},this[_0x385c12(0x171)][_0x385c12(0x155)](_0x3f2238=>{const _0x523507=_0x385c12;this[_0x523507(0x15e)][_0x523507(0x158)]+=_0x3f2238[_0x523507(0x158)],this[_0x523507(0x15e)][_0x523507(0x15d)]+=_0x3f2238[_0x523507(0x15d)],this['total'][_0x523507(0x153)]+=_0x3f2238['tax5'],this[_0x523507(0x15e)]['taxMonthly']+=_0x3f2238[_0x523507(0x164)];const _0xc1787d=_0x3f2238[_0x523507(0x173)]?_0x3f2238['nonReport']:0x0;this[_0x523507(0x15e)][_0x523507(0x159)]+=_0xc1787d,_0x3f2238[_0x523507(0x15f)]=_0x3f2238[_0x523507(0x158)]+_0xc1787d+_0x3f2238[_0x523507(0x15d)]+_0x3f2238[_0x523507(0x153)]+_0x3f2238['taxMonthly'],this[_0x523507(0x15e)]['sum']+=_0x3f2238[_0x523507(0x15f)];});}}})[_0x1a6ba2(0x174)](_0x1a6ba2(0x170));
</script>

</body>
</html>
